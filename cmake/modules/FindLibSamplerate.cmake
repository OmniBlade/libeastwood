SET(LIBSAMPLERATE_FOUND FALSE)

IF (LIBSAMPLERATE_INCLUDE_DIRS AND LIBSAMPLERATE_LIBRARIES)
    SET(LIBSAMPLERATE_FIND_QUIETLY TRUE)
ENDIF (LIBSAMPLERATE_INCLUDE_DIRS AND LIBSAMPLERATE_LIBRARIES)

IF (NOT WIN32)
   INCLUDE(FindPkgConfig)
   PKG_SEARCH_MODULE(LIBSAMPLERATE samplerate)
   ELSE (NOT WIN32)
       FIND_PATH(LIBSAMPLERATE_INCLUDE_DIRS samplerate.h )
       FIND_LIBRARY(LIBSAMPLERATE_LIBRARIES NAMES samplerate )
       INCLUDE(FindPackageHandleStandardArgs)
       FIND_PACKAGE_HANDLE_STANDARD_ARGS(LIBSAMPLERATE DEFAULT_MSG LIBSAMPLERATE_INCLUDE_DIRS LIBSAMPLERATE_LIBRARIES)
ENDIF (NOT WIN32)

IF (LIBSAMPLERATE_FOUND)
   INCLUDE(CheckLibraryExists)
   CHECK_LIBRARY_EXISTS(${LIBSAMPLERATE_LIBRARIES} src_simple "" LIBSAMPLERATE_HAS_SRC_SIMPLE)
   IF (NOT LIBSAMPLERATE_HAS_SRC_SIMPLE)
      SET(LIBSAMPLERATE_FOUND FALSE)
   ENDIF(NOT LIBSAMPLERATE_HAS_SRC_SIMPLE)
ENDIF (LIBSAMPLERATE_FOUND)

MARK_AS_ADVANCED( LIBSAMPLERATE_INCLUDE_DIRS LIBSAMPLERATE_LIBRARIES )
