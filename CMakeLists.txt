PROJECT(libeastwood)
SET( PACKAGE "libeastwood" )
SET( CMAKE_MODULE_PATH ${libeastwood_SOURCE_DIR}/cmake/modules )
cmake_minimum_required(VERSION 2.6)


SET(LIBEASTWOOD_MAJOR "0")
SET(LIBEASTWOOD_COMPATMINOR "0")
SET(LIBEASTWOOD_MINOR "0")
SET(LIBEASTWOOD_PATCH "1")

MATH( EXPR LIBEASTWOOD_CURRENT "${LIBEASTWOOD_MAJOR} * 100 + ${LIBEASTWOOD_MINOR}" )
MATH( EXPR LIBEASTWOOD_AGE     "${LIBEASTWOOD_MINOR} - ${LIBEASTWOOD_COMPATMINOR}" )
MATH( EXPR LIBEASTWOOD_SO_FIRST  "${LIBEASTWOOD_CURRENT}-${LIBEASTWOOD_AGE}" )
SET( VERSION "${LIBEASTWOOD_MAJOR}.${LIBEASTWOOD_MINOR}.${LIBEASTWOOD_PATCH}" )

SET( CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -Wall -Wextra -pedantic -O3 -Wno-long-long -Wno-variadic-macros -fPIC -g" )

SET( LIBEASTWOOD_VERSION_INFO "${LIBEASTWOOD_SO_FIRST}.${LIBEASTWOOD_AGE}.${LIBEASTWOOD_PATCH}" )
SET( LIBEASTWOOD_SOVERSION_INFO "${LIBEASTWOOD_SO_FIRST}" )

FIND_PACKAGE(SDL REQUIRED)
IF ( NOT SDL_FOUND)
  MESSAGE( FATAL_ERROR " SDL-devel not found" )
ELSE ( NOT SDL_FOUND)
  INCLUDE_DIRECTORIES(${SDL_INCLUDE_DIR})
ENDIF( NOT SDL_FOUND)

FIND_PACKAGE(SDL_mixer REQUIRED)
IF ( NOT SDLMIXER_FOUND)
  MESSAGE( FATAL_ERROR " SDL_mixer-devel not found" )
ELSE ( NOT SDLMIXER_FOUND)
  INCLUDE_DIRECTORIES(${SDLMIXER_INCLUDE_DIR})
ENDIF( NOT SDLMIXER_FOUND)


FIND_PACKAGE(LibSamplerate REQUIRED)
IF ( NOT LIBSAMPLERATE_FOUND)
  MESSAGE( FATAL_ERROR " libsamplerate-devel not found" )
ELSE ( NOT LIBSAMPLERATE_FOUND)
  INCLUDE_DIRECTORIES(${LIBSAMPLERATE_INCLUDE_DIR})
ENDIF( NOT LIBSAMPLERATE_FOUND)


CONFIGURE_FILE(${libeastwood_SOURCE_DIR}/libeastwood.pc.cmake ${libeastwood_BINARY_DIR}/libeastwood.pc @ONLY)
INSTALL( FILES ${libeastwood_BINARY_DIR}/libeastwood.pc DESTINATION ${LIB_INSTALL_DIR}/pkgconfig )

ADD_SUBDIRECTORY( src )

